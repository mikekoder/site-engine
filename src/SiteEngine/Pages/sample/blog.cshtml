@*
    {
        id: "blog",
        parent: "home",
        slug: "blog",
        title: "Blog",
        menuPosition: 1
    }
*@
@model Blog
@{
    Layout = "~/Pages/Shared/_PagesLayout.cshtml";
    var posts = Site.Pages.ChildrenOf(Model);
    var categories = posts.Where(p => p.Categories != null).SelectMany(p => p.Categories).Distinct().OrderBy(c => c);
}
<div class="row">
    <div class="col-sm-8">
        @foreach (var post in posts.OrderByDescending(p => p.Published))
        {
            <div class="panel panel-default">
                <div class="panel-heading"><a href="@post.Path">@post.Title</a></div>
                <div class="panel-body">
                    @post.Excerpt
                </div>
                <div class="panel-footer">
                    <span><i class="glyphicon glyphicon-time"></i> @post.Published.ToString("dd.MM.yyyy")</span>
                    <span><i class="glyphicon glyphicon-user"></i> @post.Author</span>
                    @if (post.Categories != null && post.Categories.Any())
                    {
                        <span>
                            <i class="glyphicon glyphicon-folder-open"></i>&nbsp;
                            @foreach (var category in post.Categories)
                    {
                                <a href="@(Model.Path)@(Model.CategoriesDirectory)/@(category)">@category</a>
                            }
                        </span>
                    }
                </div>
            </div>
        }

    </div>
    <div class="col-sm-4">
        <h4>Categories</h4>
        <ul>
            @foreach (var category in categories)
            {
                <li><a href="@(Model)@(Model.CategoriesDirectory)/@(category)">@category</a></li>
            }
        </ul>
    </div>
</div>
